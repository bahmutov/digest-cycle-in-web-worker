<!DOCTYPE html>
<html lang="en">

<head>
  <title>Digest in web worker</title>
  <style>
  p {
    padding: 100px;
  }
  </style>
  <script src="micro-angular.js"></script>
  <script src="primes.js"></script>
</head>

<body>
  <h1>Digest in web worker</h1>
  <p>Open browser console to see log messages.</p>
  <script>
    var scope = new Scope();
    scope.$watch(function watcherFn(scope) {
      return scope.n;
    }, function listenerFn(newValue, oldValue, scope) {
      if (newValue) {
        console.log('finding', newValue, 'primes');
        console.profile('finding primes');
        scope.primes = findPrimes(newValue);
        console.profileEnd('finding primes');
      }
    });
    scope.n = 5000;
    scope.$digest();
  </script>
</body>
</html>
